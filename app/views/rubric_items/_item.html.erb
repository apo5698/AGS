<div class="list-group-item-action d-flex card-header justify-content-between align-items-center" id="heading_<%= rubric_item.seq %>" data-toggle="collapse" data-target="#collapse_<%= rubric_item.seq %>">
  <span id="seq"><%= "#{rubric_item.seq}. #{rubric_item.title}" %></span>
  <% status, messages = rubric_item.validate %>
  <% if status == :completed %>
    <span class="badge badge-success badge-pill">âœ“</span>
  <% else %>
    <a class="badge badge-danger badge-pill" title="" data-placement="top" data-toggle="tooltip" href="#" data-original-title="<%= messages.uniq.join(". ") << '.' %>">!</a>
  <% end %>
</div>
<div id="collapse_<%= rubric_item.seq %>" class="collapse show" aria-labelledby="heading_<%= rubric_item.seq %>" data-parent="#rubric_items_accordion">
  <div class="card-body">
    <%= form_with model: [@course, @assignment, rubric_item] do |form| %>
      <%= form.hidden_field :seq %>
      <p class="card-text">
        <b>Usage: </b><%= rubric_item.usage %>
      </p>
      <% required_fields = rubric_item.fields %>
      <div class="row">
        <% if required_fields.include?('input_file') %>
          <div class="col-lg-3">
            <div class="form-group">
              <%= form.label :primary_file, "Input file" %>
              <%= form.select :primary_file, TsFile.filenames(@assignment.id), { include_blank: true }, class: "form-control" %>
            </div>
          </div>
        <% end %>
        <% if required_fields.include?('oracle_file') %>
          <div class="col-lg-3">
            <div class="form-group">
              <%= form.label :secondary_file, "Oracle file" %>
              <%= form.select :secondary_file, %w(Hello.java Goodbye.java HelloTest.java GoodbyeTest.java), { include_blank: true }, class: "form-control" %>
            </div>
          </div>
        <% end %>
        <% if required_fields.include?('bbtp') %>
          <div class="col-lg-3">
            <div class="form-group">
              <%= form.label :tertiary_file, "Black box test plan" %>
              <%= form.select :tertiary_file, %w(*.pdf *.docx), { include_blank: true }, class: "form-control" %>
            </div>
          </div>
        <% end %>
        <% if required_fields.include?('test_file') %>
          <div class="col-lg-3">
            <div class="form-group">
              <%= form.label :secondary_file, "Test file" %>
              <%= form.select :secondary_file, %w(Hello.java Goodbye.java HelloTest.java GoodbyeTest.java), { include_blank: true }, class: "form-control" %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="row">
        <div class="col-lg-12">
          <% if required_fields.include?('description') %>
            <div class="form-group">
              <%= form.label :description, "Description" %>
              <span class="text-muted">(optional)</span>
              <% if rubric_item.description.blank? %>
                <%= form.text_area :description, rows: 3, class: "form-control", value: rubric_item.default_description %>
              <% else %>
                <%= form.text_area :description, rows: 3, class: "form-control" %>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12">
          <%= render partial: '/rubric_items/table', locals: { rubric_item: rubric_item, form: form } %>
        </div>
      </div>
      <%= form.submit "Save", class: "btn btn-link" %>
      <% url = "/courses/#{@course.id}/assignments/#{@assignment.id}/rubric/rubric_items/#{rubric_item.id}" %>
      <a href="<%= url %>" class="btn btn-link" data-method="delete">Delete</a>
    <% end %>
  </div>
</div>