<% criterion_types = Criterion.criterion_types.keys %>
<% default_set = rubric_item.default_set %>
<% criteria = default_set.map { |c| c[:criterion] } %>

<%= form.fields_for "criterion_#{count}" do |f| %>
  <tr>
    <td>
      <div class="d-flex">
        <%= f.select :criterion_type, criterion_types, { selected: criterion[:criterion_type] }, class: 'borderless flex-fill', required: true %>
      </div>
    </td>
    <td>
      <div class="d-flex">
        <%= f.text_field :points, value: criterion[:points], class: "borderless", style: "width: 50px", required: true %>
      </div>
    </td>
    <td>
      <div class="d-flex">
        <% if criteria.include?(criterion[:criterion]) %>
          <%= f.select :criterion, criteria, { selected: criterion[:criterion] }, class: 'borderless flex-fill', style: "width: 50%", required: true %>
        <% else %>
          <%= f.text_field :criterion, value: criterion[:criterion], class: 'borderless flex-fill', style: "width: 50%", required: true %>
        <% end %>
      </div>
    </td>
    <td>
      <div class="d-flex">
        <%= f.text_field :response, value: criterion[:response], class: "borderless flex-fill", style: "width: 40%", required: true %>
      </div>
    </td>
    <td class="align-middle">
      <a class="text-body a-del text-hide"><i class="fas fa-minus"></i></a>
    </td>
  </tr>
<% end %>