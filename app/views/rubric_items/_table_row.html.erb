<% criterion_types = Criterion.criterion_types.keys %>
<% criteria = default_set.map { |c| c[:criterion] } %>

<%= form.fields_for "criterion_#{count}" do |f| %>
  <tr>
    <% if required_items.include?('type') %>
      <td>
        <div class="d-flex">
          <%= f.select :criterion_type, criterion_types, {selected: criterion[:criterion_type]}, class: 'borderless flex-fill' %>
        </div>
      </td>
    <% end %>
    <% if required_items.include?('points') %>
      <td>
        <div class="d-flex">
          <%= f.text_field :points, value: criterion[:points], class: "borderless", style: "width: 50px" %>
        </div>
      </td>
    <% end %>
    <% if required_items.include?('criterion') %>
      <td>
        <div class="d-flex">
          <% if criteria.include?(criterion[:criterion]) %>
            <%= f.select :criterion, criteria, {selected: criterion[:criterion]}, class: 'borderless flex-fill', style: "width: 50%" %>
          <% else %>
            <%= f.text_field :criterion, value: criterion[:criterion], class: 'borderless flex-fill', style: "width: 50%" %>
          <% end %>
        </div>
      </td>
    <% end %>
    <% if required_items.include?('response') %>
      <td>
        <div class="d-flex">
          <%= f.text_field :response, value: criterion[:response], class: "borderless flex-fill", style: "width: 40%" %>
        </div>
      </td>
    <% end %>
    <td class="align-middle">
      <a class="text-body a-del"><i class="fas fa-minus"></i></a>
    </td>
  </tr>
<% end %>