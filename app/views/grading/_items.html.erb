<div class="row">
  <div class="col-lg-12 pb-lg-3">
    <h2><%= @controller.capitalize %></h2>
  </div>
</div>

<!--number - the number of items (exercise, project, or homework)-->
<!--number_of_cards - the number of cards to render (one additional card for adding new item)-->
<% number = @assignments.size %>
<% number_of_cards = number + 1 %>
<div class="row">
  <% (1..number_of_cards).each_with_index do |x, i| %>
    <% assignment = @assignments[i] %>
    <div class="col-lg-4 pb-3">
      <div class="card" style="height: 10rem;" id="<%= x %>">
        <div class="card-body">
          <% if i == number_of_cards - 1 %>
            <!--center the 'plus' button-->
            <div class="center" style="height: 100%">
              <a href="#" class="stretched-link" data-toggle="modal" data-target="#addAssignmentModal">
                <i class="fas fa-plus-circle fa-4x"></i>
              </a>
            </div>
          <% else %>
            <h4 class="card-title"><a href="<%= url_prefix + assignment.id.to_s %>/prepare"><%= assignment.name %></a>
            </h4>
            <h6 class="card-subtitle mb-2 text-muted"><%= assignment.term %> <%= assignment.course %>
              (<%= assignment.section %>)</h6>
            <p class="card-text"><%= assignment.description %></p>
            <a href="#" class="card-link" data-toggle="modal" data-target="#editAssignmentModal">Edit</a>
            <a href="/grading/<%= assignment.id.to_s %>" data-method="delete" class="card-link">Delete</a>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<% @assignment_type = @controller.singularize %>

<%= form_tag "/grading/", method: 'post' %>
<div class="modal fade" id="addAssignmentModal" tabindex="-1" role="dialog" aria-labelledby="addAssignmentModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <%= render partial: "/grading/assignment_modal", locals: { title: "Add a new #{@assignment_type}", type: @assignment_type } %>
    </div>
  </div>
</div>