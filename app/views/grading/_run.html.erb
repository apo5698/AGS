<div class="row mb-4">
  <div class="col-auto" style="min-width: 400px">
    <h3>Compiled Classes</h3>
    <% compiled_classes = Dir.glob(@bin_path.join('*.class')) %>
    <% if compiled_classes.empty? %>
      None
    <% else %>
      <%= form_for :run do |f| %>
        <div class="form-group">
          <ul class="list-group code">
            <% compiled_classes.sort.each do |filepath| %>
              <% filename = File.basename(filepath) %>
              <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center mb-0">
                <%= filename %>
                <% if Dir.glob(filepath.gsub('bin', 'src').gsub('.class', '.java')).empty? %>
                  <span class="badge badge-danger" data-toggle="tooltip" data-placement="right" title="Missing source file">
                    <i class="fas fa-question"></i>
                  </span>
                <% end %>
                <div class="custom-control custom-radio">
                  <%= f.radio_button :file, "#{filename}", class: 'custom-control-input' %>
                  <%= f.label :"file_#{filename.downcase.gsub('.', '_')}", 0.chr, class: 'custom-control-label' %>
                </div>
              </li>
            <% end %>
          </ul>
        </div>
        <div class="form-group">
          <div class="custom-control custom-checkbox">
            <%= f.check_box :"options[junit]", class: 'custom-control-input' %>
            <%= f.label :"options[junit]", 'Run with Junit library (tests)', class: 'custom-control-label' %>
          </div>
        </div>
        <div class="form-group">
          <%= f.label :arg, 'Optional arguments (separated by space)', class: 'col-form-label' %>
          <%= f.text_field :arg, class: 'form-control', placeholder: 'Arguments' %>
        </div>
        <%= f.submit 'Run selected', class: 'btn btn-primary' %>
      <% end %>
    <% end %>
  </div>
</div>
<div class="row mb-4">
  <div class="col-lg-12">
    <h3>Console Output</h3>
    <div class="terminal"><%= @console_output %></div>
  </div>
</div>