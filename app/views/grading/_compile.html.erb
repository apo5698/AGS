<div class="row mb-4">
  <div class="col-auto" style="min-width: 400px">
    <h3>Source Files</h3>
    <% source_files = Dir.glob(@upload_root.join('**', '*.java')) %>
    <% if source_files.empty? %>
      None
    <% else %>
      <%= form_for :compile do |f| %>
        <div class="form-group">
          <ul class="list-group code">
            <% source_files.sort.each do |filepath| %>
              <li class="list-group-item d-flex justify-content-between align-items-center code">
                <%= File.basename(filepath) %>
                <% if Dir.glob(filepath.gsub('src', 'bin').gsub('.java', '.class')).empty? %>
                  <% span_class = 'badge badge-danger' %>
                  <% tooltip_title = 'Not yet compiled' %>
                  <% icon_class = 'fas fa-question' %>
                <% else %>
                  <% span_class = 'badge badge-success' %>
                  <% tooltip_title = 'Compiled' %>
                  <% icon_class = 'fas fa-check' %>
                <% end %>
                <span class="<%= span_class %>" data-toggle="tooltip" data-placement="right" title="<%= tooltip_title %>">
                  <i class="<%= icon_class %>"></i>
                </span>
              </li>
            <% end %>
          </ul>
        </div>
        <div class="form-group">
          <div class="custom-control custom-checkbox">
            <%= f.check_box :"options[junit]", class: 'custom-control-input' %>
            <%= f.label :"options[junit]", 'Run with Junit library (tests)', class: 'custom-control-label' %>
          </div>
        </div>
        <div class="form-group">
          <%= f.label :arg, 'Optional arguments (separated by space)', class: 'col-form-label' %>
          <%= f.text_field :arg, class: 'form-control', placeholder: 'Arguments' %>
        </div>
        <%= f.submit 'Compile all', class: "btn btn-primary" %>
      <% end %>
    <% end %>
  </div>
</div>
<div class="row mb-4">
  <div class="col-lg-12">
    <h3>Console Output</h3>
    <div class="terminal"><%= @console_output %></div>
  </div>
</div>
<script>
  let customCount = 0;

  function add() {
    customAdd(customCount++);
  }
</script>