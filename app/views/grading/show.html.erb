<% actions = %w[prepare compile run checkstyle summary] %>

<div class="row">
  <table class="table table-hover" id="transparent-table">
    <tbody>
    <tr class="table-light">
      <% current_action_index = actions.index(@action) %>
      <% actions.each_with_index do |act, i| %>
        <% if i <= current_action_index %>
          <% if i > 0 %>
            <td><i class="fas fa-chevron-right"></i></td>
          <% end %>
          <td><a href="/grading/<%= @id %>/<%= act %>"><%= act.capitalize %></a></td>
        <% else %>
          <td class="text-muted"><i class="fas fa-chevron-right"></i></td>
          <td class="text-muted"><%= act.capitalize %></td>
        <% end %>
      <% end %>
    </tr>
    </tbody>
  </table>
</div>

<div class="row">
  <div class="col-lg-3">
    <ul class="list-group">
      <% (0...5).each_with_index do |s, i| %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          Student <%= i %> (s<%= i %>)
          <span class="badge badge-success badge-pill">
          <i class="fas fa-check"></i>
        </span>
        </li>
      <% end %>
      <% (0...5).each_with_index do |s, i| %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          Student <%= i %> (s<%= i %>)
          <span class="badge badge-danger badge-pill">
          <i class="fas fa-exclamation"></i>
        </span>
        </li>
      <% end %>
      <% (0...5).each_with_index do |s, i| %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          Student <%= i %> (s<%= i %>)
          <span class="badge badge-primary badge-pill">
          <i class="fas fa-times"></i>
        </span>
        </li>
      <% end %>
    </ul>
  </div>
  <div class="col-lg-9">
    <div class="row">
      <div class="col-lg-12 mb-5">
        <div class="row mb-4">
          <div class="col-lg-12">
            <h1><%= @action.capitalize %></h1>
          </div>
        </div>
        <%= render partial: @action %>
      </div>
      <div class="col-lg-12">
        <% if @action != "prepare" %>
          <a href="/grading/<%= @id %>/<%= actions[current_action_index - 1] %>">
            <button class="btn btn-primary">Back</button>
          </a>
        <% end %>
        <% if @action != "summary" %>
          <a href="/grading/<%= @id %>/<%= actions[current_action_index + 1] %>">
            <button class="btn btn-primary">Next</button>
          </a>
        <% end %>
        <% if @action == "summary" %>
          <button class="btn btn-primary">Done</button>
        <% end %>
      </div>
    </div>
  </div>
</div>