<% actions = %w[prepare compile run checkstyle summary] %>
<%= javascript_pack_tag 'event', 'data-turbolinks-track': 'reload' %>

<div class="row d-none d-lg-block">
  <table class="table table-hover" id="transparent-table">
    <tbody>
    <tr class="table-light">
      <% current_action_index = actions.index(@action) %>
      <% actions.each_with_index do |act, i| %>
        <% if i <= current_action_index %>
          <% if i > 0 %>
            <td><i class="fas fa-chevron-right"></i></td>
          <% end %>
          <td><a href="/grading/<%= @assignment_type %>/<%= @id %>/<%= act %>"><%= act.capitalize %></a></td>
        <% else %>
          <td class="text-muted"><i class="fas fa-chevron-right"></i></td>
          <td class="text-muted"><%= act.capitalize %></td>
        <% end %>
      <% end %>
    </tr>
    </tbody>
  </table>
</div>

<div class="row">
  <div class="col-lg-3 mb-4 mb-lg-0">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">TODO</li>
    </ol>
    <h4 class="ml-1">Students</h4>
    <% if @students.empty? %>
      <div class="text-center mt-5">
        <div><i class="far fa-question-circle" style="font-size: 64px"></i></div>
        <div class="mt-2">Not available</div>
      </div>
    <% else %>
      <ul class="list-group">
        <% @students.each do |student| %>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <%= student %>
            <!--          <span class="badge badge-success badge-pill">-->
            <!--            <i class="fas fa-check"></i>-->
            <!--          </span>-->
            <!--          <span class="badge badge-danger badge-pill">-->
            <!--            <i class="fas fa-exclamation"></i>-->
            <!--          </span>-->
            <!--          <span class="badge badge-primary badge-pill">-->
            <!--            <i class="fas fa-times"></i>-->
            <!--          </span>-->
          </li>
        <% end %>
      </ul>
    <% end %>
  </div>
  <div class="col-lg-9">
    <div class="row">
      <div class="col-lg-12 mb-5">
        <div class="row mb-4">
          <div class="col-lg-12">
            <h1><%= @action.capitalize %></h1>
          </div>
        </div>
        <%= render partial: @action %>
      </div>
      <div class="col-lg-12">
        <% if @action != "prepare" %>
          <a href="/grading/<%= @assignment_type %>/<%= @id %>/<%= actions[current_action_index - 1] %>">
            <button class="btn btn-primary">Back</button>
          </a>
        <% end %>
        <% if @action != "summary" %>
          <a href="/grading/<%= @assignment_type %>/<%= @id %>/<%= actions[current_action_index + 1] %>">
            <button class="btn btn-primary">Next</button>
          </a>
        <% end %>
        <% if @action == "summary" %>
          <button class="btn btn-primary">Done</button>
        <% end %>
      </div>
    </div>
  </div>
</div>